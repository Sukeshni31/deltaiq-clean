<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>DeltaAIQ</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 720px;
      margin: 40px auto;
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      font-size: 15px;
    }
    button {
      cursor: pointer;
    }
    .card {
      border: 1px solid #ddd;
      padding: 16px;
      margin-top: 16px;
      border-radius: 8px;
    }
  </style>
</head>
<body>

<h1>DeltaAIQ</h1>
<p>AI Readiness Benchmark</p>

<input id="company" placeholder="Company name (e.g. Everest)" />

<select id="industry">
  <option value="">Select Industry</option>
  <option>IT Services</option>
  <option>Aviation</option>
  <option>Manufacturing</option>
  <option>Pharma / Healthcare</option>
  <option>SaaS / Product</option>
  <option>GCC / Captive</option>
</select>

<button onclick="generate()">Generate AIQ</button>

<div id="output"></div>

<script>
<script>
async function generate() {
  const company = document.getElementById("company").value.trim();
  const industry = document.getElementById("industry").value;

  if (!company || !industry) {
    alert("Please enter company and select industry");
    return;
  }

  const output = document.getElementById("output");
  output.innerHTML = "Calculating AIQ…";

  try {
    const res = await fetch("/api/aiq", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ company, industry })
    });

    if (!res.ok) {
      const text = await res.text();
      throw new Error(text);
    }

    const data = await res.json();

    output.innerHTML = `
      <div class="card">
        <h2>${data.aiq} / 100</h2>
        <p><strong>Industry median:</strong> ${data.industryMedian}</p>
        <p><strong>Position:</strong> ${data.position}</p>
      </div>

      <div class="card">
        <h3>Peer Comparison</h3>
        ${data.peerComparison.peers.map(p =>
          `<div>${p.name} — <strong>${p.score}</strong></div>`
        ).join("")}
        <p><strong>Rank:</strong> ${data.peerComparison.rank} of ${data.peerComparison.total}</p>
      </div>
    `;
  } catch (err) {
    console.error(err);
    output.innerHTML = `<p style="color:red">Error: ${err.message}</p>`;
  }
}
</script>


</body>
</html>
